<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Security-Test</title>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
  }

  :root {
    --highlight-border: #cc0000;
    --highlight-bg: #ffe6e6;
    --bg: #fafafa;
    --text: #000;
    --box-bg: #fff;
    --pass-bg: #e8ffe8;
    --pass-border: #00b300;
    --fail-bg: #ffe8e8;
    --fail-border: #cc0000;
  }

  .dark {
    --highlight-border: #ff5757;
    --highlight-bg: #3b1f1f;
    --bg: #353f40;
    --text: #e6e6e6;
    --box-bg: #2a2a2a;
    --pass-bg: #1f3b1f;
    --pass-border: #00ff76;
    --fail-bg: #3b1f1f;
    --fail-border: #ff5757;
  }

  #container {
    max-width: 900px;
    width: 90%;
    padding: 20px;
  }

  h1 { text-align: center; }

  .quiz-section {
    margin-bottom: 20px;
    border: 2px solid #0078d4;
    border-radius: 10px;
    padding: 15px;
    background: var(--box-bg);
  }

  .extra-section {
    border-color: #00a000;
  }

  .btn {
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    background: #0078d4;
    color: #fff;
    cursor: pointer;
  }

  #modeToggle {
    position: absolute;
    right: 20px;
    top: 20px;
  }

  .hidden { display: none; }

  #resultBox {
    border-radius: 12px;
    padding: 20px;
    margin-top: 20px;
  }

  .result-pass {
    background: var(--pass-bg);
    border-left: 6px solid var(--pass-border);
  }

  .result-fail {
    background: var(--fail-bg);
    border-left: 6px solid var(--fail-border);
  }
</style>
</head>

<body>
<button id="modeToggle" onclick="toggleMode()">ðŸŒž / ðŸŒ™</button>

<div id="container">
  <h1>Security-Test</h1>

  <div id="login">
    <label>Personnel number:</label><br>
    <input type="text" id="personalnummer" maxlength="5"><br><br>

    <label>Password:</label><br>
    <input type="password" id="quizPassword"><br><br>

    <label>Quiz package:</label><br>
    <select id="quizSelect">
      <option value="auto">Automatically (random)</option>
      <option value="0">Quiz package 1</option>
      <option value="1">Quiz package 2</option>
      <option value="2">Quiz package 3</option>
    </select><br><br>

    <button class="btn" onclick="startQuiz()">Start</button>
  </div>

  <div id="quiz" class="hidden"></div>
  <div id="resultPage" class="hidden">
    <div id="result"></div>
  </div>
</div>

<script>
/* ================================
   ðŸ” MASTER PASSWORD (HIER Ã„NDERN)
================================ */
const MASTER_PASSWORD = "SEC-2026-01";

/* ================================
   QUIZ DATEN (unverÃ¤ndert)
================================ */
const quizPackages = [
  {
    name: "Quiz-Paket 1",
    general: [
      { q: "Drinking alcohol on duty isâ€¦", options: ["Allowed", "Prohibited", "Optional"], correct: 1, points: 2 }
    ],
    extra: [
      { q: "Fight breaks out â€“ what do you do?", options: ["Intervene", "Report only", "Ignore"], correct: 1, points: 5 }
    ]
  },
  {
    name: "Quiz-Paket 2",
    general: [
      { q: "Who may change booths?", options: ["Colleagues", "Security office", "Customer"], correct: 1, points: 2 }
    ],
    extra: [
      { q: "ID required during work?", options: ["Sometimes", "Always", "Never"], correct: 1, points: 5 }
    ]
  },
  {
    name: "Quiz-Paket 3",
    general: [
      { q: "Unauthorized person at booth?", options: ["Ignore", "Report", "Join"], correct: 1, points: 2 }
    ],
    extra: [
      { q: "Fire hazard noticed?", options: ["Ignore", "Report immediately", "Fix alone"], correct: 1, points: 5 }
    ]
  }
];

let selectedPackage;

function toggleMode() {
  document.body.classList.toggle("dark");
}

function startQuiz() {
  const userId = document.getElementById("personalnummer").value.trim();
  const password = document.getElementById("quizPassword").value.trim();

  if (!/^\d{5}$/.test(userId)) {
    alert("Personnel number must be exactly 5 digits");
    return;
  }

  if (password !== MASTER_PASSWORD) {
    alert("Wrong password");
    return;
  }

  const selection = document.getElementById("quizSelect").value;
  selectedPackage = selection === "auto"
    ? quizPackages[Math.floor(Math.random() * quizPackages.length)]
    : quizPackages[parseInt(selection)];

  document.getElementById("login").classList.add("hidden");
  const quizDiv = document.getElementById("quiz");
  quizDiv.classList.remove("hidden");
  quizDiv.innerHTML = "";

  [...selectedPackage.general, ...selectedPackage.extra].forEach((q, i) => {
    quizDiv.innerHTML += `
      <div class="quiz-section">
        <p><b>${i + 1}. ${q.q}</b></p>
        ${q.options.map((o, j) =>
          `<label><input type="radio" name="q${i}" value="${j}"> ${o}</label><br>`
        ).join("")}
      </div>`;
  });

  quizDiv.innerHTML += `<button class="btn" onclick="submitQuiz()">Submit</button>`;
}

function submitQuiz() {
  let errors = 0;
  const all = [...selectedPackage.general, ...selectedPackage.extra];

  all.forEach((q, i) => {
    const sel = document.querySelector(`input[name="q${i}"]:checked`);
    if (!sel || parseInt(sel.value) !== q.correct) {
      errors += q.points;
    }
  });

  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("resultPage").classList.remove("hidden");

  document.getElementById("result").innerHTML = `
    <div id="resultBox" class="${errors < 10 ? "result-pass" : "result-fail"}">
      <strong>${errors < 10 ? "PASSED" : "FAILED"}</strong><br>
      Error points: ${errors}
    </div>`;
}
</script>
</body>
</html>
